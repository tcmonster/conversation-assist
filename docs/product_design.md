# 产品设计文档

@docs/requirement.md#综述

## 产品愿景与目标

- 帮助跨语种沟通用户在邮件、即时通讯等场景下快速理解对方消息并输出高质量回复,显著降低翻译与润色成本。
- 保持本地离线化/单机化体验,确保敏感沟通内容由用户掌控,满足隐私与安全诉求(@docs/requirement.md#产品范围与约束)。
- 建立高效、稳定的生成流程,让用户在数次点击内完成翻译、意图梳理与回复生成。

## 核心用户画像

1. **跨国沟通负责人**  
   - 角色: 需要频繁与海外同事/客户沟通的 PM、BD、运营。  
   - 目标: 快速理解复杂业务邮件,输出符合语气与品牌的回复。  
   - 痛点: 语言转换耗时,担心措辞不准确或过于生硬。  
   - 场景: 日常邮件往来、合作谈判即时消息。

2. **自由职业创作者/服务商**  
   - 角色: 跨国自由职业者、翻译、内容创作者。  
   - 目标: 在保持个人风格的同时,确保回复专业、准确。  
   - 痛点: 上下文信息散乱,缺少可快速复用的语料与语气。  
   - 场景: 客户需求确认、合同沟通、项目进展同步。

3. **跨语种客服/支持人员**  
   - 角色: 小团队客服人员,偶发性处理异语种工单。  
   - 目标: 在不掌握对方语言的情况下快速响应。  
   - 痛点: 缺乏即时翻译支持,容易误解语境。  
   - 场景: 邮件支持、社媒私信回复。

## 核心场景与任务

1. **理解与翻译来信**  
   - 用户复制对方原始消息粘贴至左栏。  
   - 触发翻译/解析,在右栏查看直译、意译或要点提取(@docs/requirement.md#翻译与解析)。  
   - 快速判断信息重点、语气与潜在行动项。

2. **编写回复意图与生成草稿**  
   - 在右栏撰写要点或选择预设语料与语气组合(@docs/requirement.md#语料与语气选择)。  
  - 触发 AI 生成,获得对方语言的回复草稿(@docs/requirement.md#输入与生成)。  
   - 对比历史输出,检查差异。

3. **润色与输出最终回复**  
   - 编辑 AI 生成结果,满足细节需求。  
   - 复制最终内容,粘贴至外部工具发送。  
   - 标记会话为完成或继续后续对话(@docs/requirement.md#历史与导出)。

4. **维护提示词与上下文**  
   - 在设置面板维护模型、密钥、提示词模板。  
   - 使用平面标签筛选 prompt,组合常用方案(@docs/requirement.md#提示词工程)。  
   - 导出/导入全量数据以备份或迁移环境(@docs/requirement.md#数据存储)。

## 用户旅程

1. **进入应用**  
   - 默认落在最近使用的 conversation。  
   - 左侧列表展示摘要、语言标识(@docs/requirement.md#界面)。  
2. **消息输入与翻译**  
   - 用户粘贴原文 → 点击"翻译/解析"按钮 → 右栏展示译文、语境解析。  
   - 若有需要,用户调整解析模式并保存结果。  
3. **设置回复意图**  
   - 用户在右栏输入要点,同时勾选适配语料、语气。  
   - 已选组合在会话层持久化,避免重复配置。  
4. **生成与比对**  
   - 点击"生成回复",左栏展示 AI 草稿。  
   - 若不满意,可调整意图或提示词,再次生成。  
   - 支持查看原文与生成稿并排对齐。  
5. **确认与导出**  
   - 用户编辑最终回复并复制。  
   - 可将整次对话导出,或在后续继续追加消息。  
6. **维护设置**  
   - 在设置面板维护模型、提示词,并导出备份。  
   - 可在任意时刻清理敏感会话。

## 信息架构

- **导航层**  
  - 会话列表(左栏)  
  - 当前会话工作区(中栏双列)  
  - AI 控制与上下文设置(右栏)  
- **会话结构**  
  - 元信息: 会话名、语言标签、更新时间、收藏状态  
  - 消息流:  
    - 原始消息  
    - 翻译/解析结果  
    - 回复意图  
    - AI 生成稿  
    - 最终发送记录(可选)  
- **设置中心**  
  - 模型与密钥  
  - 提示词模板与标签  
  - 预设语料库  
  - 默认语气/语言偏好  
  - 数据导入导出

## 交互设计概述

### 布局原则

- 三栏保持可调整宽度,右栏可折叠提升编辑空间(@docs/requirement.md#界面)。  
- 左右对话列需同步滚动,确保消息在纵向对齐显示。  
- 关键操作(翻译、生成、复制)在各自区域提供主按钮,并支持键盘快捷键。

### 关键流程

1. **新建会话**  
   - 来自左栏的"新建"按钮或快捷键。  
   - 弹出对话框输入会话名与语言标签。  
   - 创建后自动聚焦左栏输入框。

2. **翻译解析**  
   - 粘贴原文后,提供"翻译"按钮或快捷键。  
   - 加载状态在右栏顶部显示,完成后提供重新翻译入口。  
   - 用户可保存多个解析模式,默认显示最近使用的模式。

3. **提示词组合**  
   - 右栏列出平面标签,允许多选。  
   - 支持"快捷方案"区,展示保存的组合。  
   - 每个组合可预览注入 prompt JSON。

4. **生成回复**  
   - 生成按钮位于右栏底部,并提示所用模型与预计 token 消耗。  
   - 左栏生成卡片顶部显示语种与状态。  
   - 提供"复制回复"与"标记已发送"操作。

5. **导出导入**  
   - 设置面板提供导出按钮,生成单一 JSON/Markdown 文件。  
   - 导入操作需确认覆盖范围并提供成功/失败反馈。  
   - 导出前提示敏感信息清理选项。

## 文案与语气

- 主动提示采用中性、专业语气,突出效率,避免命令式。  
- 错误提示明确问题和解决建议,例如:“生成失败,请检查网络或模型配额”。  
- 重要操作配合简短说明: “复制即将覆盖粘贴板内容”。  
- 支持多语言 UI 规划,但首版以中文界面为主。

## 无障碍与可用性

- 全局提供键盘导航与可配置快捷键(@docs/requirement.md#功能)。  
- 保证对比度符合 WCAG AA 标准,关键图标配合文本标签。  
- 对长文本区域提供断点保存与自动聚焦反馈。  
- 支持在右栏折叠时仍可通过顶部入口访问关键设置。

## 运营与留存设计

- 会话列表支持收藏与搜索,帮助用户快速回溯高价值对话。  
- 导出/导入降低切换设备成本,增强用户粘性。  
- 通过语料快捷方案提升使用频次,降低重复配置成本。  
- 反馈机制(例如生成成功 Toast)增强对系统响应的信任。

## 关键指标(KPI)

- 平均完成一次回复的时间(目标 ≤ 3 分钟)。  
- 同一会话中重复生成次数(反映生成质量与提示词准确性)。  
- 用户保留常用提示词组合数量(衡量语料体系价值)。  
- 导出/导入成功率与使用频次(评估数据掌控需求)。  
- 生成失败率与平均响应时间。

## 风险与缓解

- **模型回复不符合语境**: 通过提示词标签、历史上下文注入降低风险,提供多次生成与手动编辑。  
- **本地存储容量限制**: 实现分页/虚拟列表,并在数据接近浏览器容量上限时提示用户导出备份。  
- **用户误删敏感内容**: 提供导出前提醒、撤销或最近删除列表。  
- **模型额度耗尽或调用失败**: 右栏状态提示模型额度,失败时提供重试/替换模型指引。

