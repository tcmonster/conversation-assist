# add-conversation-management

## Summary
- 定义标准化的本地会话数据结构,覆盖会话元信息、消息/意图双列 feed 以及归档标记。
- 在 UI 中串联该会话状态,实现置顶、归档、删除并实时落地到 localStorage。
- 提供顶栏操作入口控制当前会话的归档/删除,与侧边栏联动刷新展示。

## Problem
- 现状仅有静态样例数据,缺乏真实的会话状态模型,无法支撑“消息 + 翻译/意图”双列 feed。
- 侧边栏的置顶/归档区块使用假数据,用户操作不会反映到界面与本地存储。
- 顶栏缺少归档与删除入口,无法符合需求文档的会话管理流程。

## Goals
- 设计可持久化的会话与消息意图数据结构,满足“对方消息 ⇄ 翻译/解析”“我方消息 ⇄ 意图”一一对应的呈现。
- 抽象统一的本地存储层,会话与设置模块共享落地逻辑,操作后刷新仍可恢复状态。
- 覆盖置顶、归档、删除操作与搜索过滤,删除需二次确认,归档默认折叠但可继续查看。
- 在主页面顶栏提供归档与删除按钮,触发后更新当前会话与侧边栏列表。

## Non-Goals
- 不实现跨设备同步或云端存储。
- 暂不实现导入导出、批量操作或多选归档。
- 不实现 AI 自动生成/翻译逻辑,仅管理已有消息与意图数据。

## Risks & Mitigations
- **localStorage 结构演进**: 设计版本化 key 并保留默认数据,避免 schema 变更导致解析失败。
- **状态同步复杂度**: 使用 React Context + reducer 管理会话,集中处理置顶/归档/删除以降低组件间状态漂移。
- **空数据渲染**: 为 feed 与侧边栏提供空态,确保首次使用或删除最后一条数据时界面仍可用。

## Open Questions
- 是否需要提供批量归档/删除? 当前仅实现单会话操作,如后续有批量需求需单独规划。
